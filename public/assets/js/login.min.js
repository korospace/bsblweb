function doValidateNasabah(a){let s=!0,e=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return $(".form-control").removeClass("is-invalid"),$(".text-danger").html(""),""==$("#nasabah-email").val()?($("#nasabah-email").addClass("is-invalid"),$("#nasabah-email-error").html("*email harus di isi"),s=!1):e.test(String($("#nasabah-email").val()).toLowerCase())||($("#nasabah-email").addClass("is-invalid"),$("#nasabah-email-error").html("*email tidak valid"),s=!1),""==$("#nasabah-password").val()&&($("#nasabah-password").addClass("is-invalid"),$("#nasabah-password-error").html("*password harus di isi"),s=!1),s}function doValidateAdmin(a){let s=!0;return $(".form-control").removeClass("is-invalid"),$(".text-danger").html(""),""==$("#admin-username").val()&&($("#admin-username").addClass("is-invalid"),$("#admin-username-error").html("*username harus di isi"),s=!1),""==$("#admin-password").val()&&($("#admin-password").addClass("is-invalid"),$("#admin-password-error").html("*password harus di isi"),s=!1),s}$("#formLoginNasabah").on("submit",function(a){if(a.preventDefault(),doValidateNasabah()){showLoadingSpinner();let s=new FormData(a.target);axios.post(`${APIURL}/nasabah/login`,s,{headers:{}}).then(a=>{hideLoadingSpinner(),document.cookie=`token=${a.data.token}; path=/;`,window.location.replace(`${BASEURL}/nasabah`)}).catch(a=>{hideLoadingSpinner(),404==a.response.status?a.response.data.messages.email?($("#nasabah-email").addClass("is-invalid"),$("#nasabah-email-error").text(a.response.data.messages.email)):a.response.data.messages.password&&($("#nasabah-password").addClass("is-invalid"),$("#nasabah-password-error").text(a.response.data.messages.password)):401==a.response.status?setTimeout(()=>{Swal.fire({icon:"warning",title:"LOGIN GAGAL!",text:"akun anda belum ter-verifikasi. silahkan verifikasi akun terlebih dahulu",confirmButtonText:"ok"}).then(()=>{var a=BASEURL+"/otp",e=$('<form action="'+a+'" method="post"><input type="text" name="email" value="'+s.get("email")+'" /><input type="text" name="password" value="'+s.get("password")+'" /></form>');$("body").append(e),e.submit()})},300):showAlert({message:"<strong>Ups . . .</strong> terjadi kesalahan, coba sekali lagi!",btnclose:!0,type:"danger"})})}}),$("#btn-forgotpass").on("click",function(a){a.preventDefault(),Swal.fire({title:"LUPA PASSWORD?",input:"text",inputAttributes:{autocapitalize:"off"},html:"<p class='mb-4'>masukan email yang terdaftar. kami akan mengirim password anda melalui email</p>",footer:'<a href="https://wa.me/6281287200602?text=Hallo%20Admin,%20saya%20ada%20kendala%20mengenai%20password">hubungi admin</a>',showCancelButton:!0,confirmButtonText:"submit",showLoaderOnConfirm:!0,preConfirm:a=>{let s=new FormData;return s.append("email",a),axios.post(`${APIURL}/nasabah/forgotpass`,s,{headers:{}}).then(()=>{Swal.fire({icon:"success",title:"success!",text:"password sudah dikirim ke email anda. silahkan cek email",showConfirmButton:!0})}).catch(a=>{404==a.response.status?Swal.showValidationMessage("email tidak terdaftar"):500==a.response.status&&Swal.showValidationMessage("terjadi kesalahan, coba sekali lagi")})},allowOutsideClick:()=>!Swal.isLoading()})}),$("#formLoginAdmin").on("submit",function(a){if(a.preventDefault(),doValidateAdmin()){showLoadingSpinner();let s=new FormData(a.target);axios.post(`${APIURL}/admin/login`,s,{headers:{}}).then(a=>{hideLoadingSpinner();let s=`${BASEURL}/admin`;""!=LASTURL&&(s=LASTURL),document.cookie=`token=${a.data.token}; path=/;`,window.location.replace(s)}).catch(a=>{hideLoadingSpinner(),401==a.response.status?showAlert({message:"<strong>Maaf . . .</strong> akun anda sudah tidak aktif!",btnclose:!0,type:"warning"}):404==a.response.status?a.response.data.messages.username?($("#admin-username").addClass("is-invalid"),$("#admin-username-error").text(a.response.data.messages.username)):a.response.data.messages.password&&($("#admin-password").addClass("is-invalid"),$("#admin-password-error").text(a.response.data.messages.password)):showAlert({message:"<strong>Ups . . .</strong> terjadi kesalahan, coba sekali lagi!",btnclose:!0,type:"danger"})})}});